<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>–í—ã–±–æ—Ä –∞–¥—Ä–µ—Å–∞</title>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã —Å —Ç–≤–æ–∏–º–∏ –∫–ª—é—á–∞–º–∏ (–≤–µ—Ä—Å–∏—è 2.1, –≤—Å–µ –º–æ–¥—É–ª–∏) -->
    <script src="https://api-maps.yandex.ru/2.1/?apikey=05bead68-7d43-45f3-92ac-a086140b1f39&suggest_apikey=c26df761-b526-4c54-a189-34d436e07268&lang=ru_RU" type="text/javascript"></script>
    <style>
        body { font-family: sans-serif; padding: 16px; margin: 0; background: #fff; }
        /* –ö—Ä–∞—Å–Ω–∞—è —Ä–∞–º–∫–∞ –ø–æ–º–æ–∂–µ—Ç —É–≤–∏–¥–µ—Ç—å, –µ—Å—Ç—å –ª–∏ –∫–∞—Ä—Ç–∞ */
        #map { width: 100%; height: 300px; margin-bottom: 16px; border-radius: 12px; border: 2px solid red; }
        #address { width: 100%; padding: 12px; font-size: 16px; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; }
        .note { font-size: 14px; color: #666; margin-top: 8px; text-align: center; }
        button { width: 100%; padding: 14px; font-size: 18px; background: #007AFF; color: white; border: none; border-radius: 10px; margin-top: 16px; font-weight: 600; }
    </style>
</head>
<body>
    <h3>üìç –£–∫–∞–∂–∏—Ç–µ —Ç–æ—á–Ω—ã–π –∞–¥—Ä–µ—Å</h3>
    <!-- autocomplete="off" —É–±–∏—Ä–∞–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ -->
    <input type="text" id="address" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ì–æ–ª–ª–∏–≤—É–¥, –ê—à–∞–Ω, –ö–∞–ø–ª–∞–Ω–±–µ–∫..." autocomplete="off">
    <div id="map"></div>
    <div class="note">–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –∞–¥—Ä–µ—Å –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞</div>
    <button id="send">‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∞–¥—Ä–µ—Å</button>

    <script>
        let selectedCoords = null;
        let selectedAddress = '';

        // –ñ–¥—ë–º –∑–∞–≥—Ä—É–∑–∫–∏ API –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –∫–∞—Ä—Ç—É
        ymaps.ready(init);

        function init() {
            // –°–æ–∑–¥–∞—ë–º –∫–∞—Ä—Ç—É —Å —Ü–µ–Ω—Ç—Ä–æ–º –≤ –¢–∞—à–∫–µ–Ω—Ç–µ
            var map = new ymaps.Map('map', {
                center: [41.311, 69.279],
                zoom: 12
            });

            // –ü–æ–¥–∫–ª—é—á–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∫ –ø–æ–ª—é –≤–≤–æ–¥–∞
            var suggestView = new ymaps.controls.SuggestView('address');
            suggestView.events.add('select', function (e) {
                var item = e.get('item');
                selectedAddress = item.displayName;

                // –ü–æ–ª—É—á–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞
                ymaps.geocode(selectedAddress).then(function (res) {
                    var firstGeoObject = res.geoObjects.get(0);
                    var coords = firstGeoObject.geometry.getCoordinates();
                    selectedCoords = coords;

                    // –°—Ç–∞–≤–∏–º –º–µ—Ç–∫—É –∏ –ø—Ä–∏–±–ª–∏–∂–∞–µ–º –∫–∞—Ä—Ç—É
                    map.geoObjects.removeAll();
                    var placemark = new ymaps.Placemark(coords, {
                        balloonContent: selectedAddress
                    });
                    map.geoObjects.add(placemark);
                    map.setCenter(coords, 15);
                });
            });
        }

        // –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∞–¥—Ä–µ—Å"
        document.getElementById('send').addEventListener('click', function() {
            if (!selectedCoords) {
                alert('–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –∞–¥—Ä–µ—Å –∏–∑ —Å–ø–∏—Å–∫–∞');
                return;
            }
            const result = {
                lat: selectedCoords[0],
                lon: selectedCoords[1],
                address: selectedAddress
            };
            // –ü–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∂–µ–º –≤ –∫–æ–Ω—Å–æ–ª–∏ –∏ –∞–ª–µ—Ä—Ç–µ (–¥–ª—è —Ç–µ—Å—Ç–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ)
            console.log('‚úÖ –í—ã–±—Ä–∞–Ω–Ω—ã–π –∞–¥—Ä–µ—Å:', result);
            alert('–ê–¥—Ä–µ—Å –≤—ã–±—Ä–∞–Ω! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç.');
            // –ü–æ–∑–∂–µ, –∫–æ–≥–¥–∞ –ø–æ–¥–∫–ª—é—á–∏–º –∫ –±–æ—Ç—É, –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram
        });
    </script>
    <!-- –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –Ω—É–∂–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã Telegram Mini App, –Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</body>
</html>